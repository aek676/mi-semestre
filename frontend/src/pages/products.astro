---
import ProductList from '../components/ProductList.astro';
import Layout from '../layouts/Layout.astro';
import { api } from '../lib/apiClient';

export const prerender = false;

const response = await api.api.productsList();
---

<Layout>
  <main style="padding: 2rem; max-width: 900px; margin: 0 auto;">
    <h1>Lista de productos</h1>
    <p>
      Consultando la API en <code
        >{api.baseUrl || '(sin baseUrl)'}/api/Products</code
      >.
    </p>
    <ProductList products={response.data} />
  </main>
</Layout>

<style>
  h1 {
    font-size: 1.5rem;
    margin-bottom: 0.25rem;
  }
  p {
    margin-top: 0;
    color: #6b7280;
  }
</style>
